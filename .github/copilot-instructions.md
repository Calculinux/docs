# Calculinux Documentation - AI Agent Instructions

## Project Overview

This is the documentation repository for **Calculinux**, a Linux distribution for PicoCalc handheld computers running on Luckfox Lyra SBCs. Built with **MkDocs** + **Material theme** using Flatly color scheme, deployed to GitHub Pages.

**Key repos**:
- `Calculinux/docs` (this repo) - Documentation site
- `Calculinux/meta-calculinux` - Yocto build system (multi-layer setup)

## Critical Documentation Patterns

### MkDocs Material Features

**Grid Cards** - Used on landing pages for visual navigation:
```markdown
<div class="grid cards" markdown>

-   :material-icon:{ .lg .middle } **Title**

    ---

    Description text.

    [:octicons-arrow-right-24: Link Text](path/to/page.md)

</div>
```
- Icons: use Material Design (`:material-*:`) or Octicons (`:octicons-*:`)
- See [docs/index.md](../docs/index.md) lines 26-61 for canonical example

**Admonitions** - For callouts:
```markdown
!!! tip "Optional Title"
    Content here

!!! warning
    No title version

!!! info "Minimum Requirements"
    - Hardware: PicoCalc with Luckfox Lyra
    - Storage: 8GB+ microSD
```
- Types: `info`, `tip`, `warning`, `danger`, `note`, `example`
- Content must be indented exactly 4 spaces

**Snippets** - Reusable content blocks via pymdownx.snippets:
```markdown
--8<-- "developer/adding-packages/_snippets/licensing-workflow.md"
```
- Stored in `docs/*/_snippets/` directories
- Use for repeated procedures (licensing, SD card install, dependencies)
- See [docs/developer/adding-packages/](../docs/developer/adding-packages/) examples

### Navigation Structure

Defined in `mkdocs.yml` nav section (lines 79-119). **Always update nav when adding new pages**.

Sections: Getting Started → Hardware → User Guide → Developer Guide → Troubleshooting → Resources

## Development Workflow

### Local Preview
```bash
pip install -r requirements.txt
mkdocs serve
# Opens http://127.0.0.1:8000 with live reload
```

### Building
```bash
mkdocs build  # Output to site/
```

### Deployment
- **Auto-deploy**: Push to `main` triggers `.github/workflows/deploy.yml` → GitHub Pages
- Manual: `mkdocs gh-deploy`

## Quality Checks (GitHub Actions)

All PRs trigger automated checks:

1. **Markdown Lint** (markdownlint) - Syntax/structure validation (MD013 line length disabled)
2. **Vale** - Prose linting for style/grammar
3. **cspell** - Spell checking (add terms to `.github/calculinux-dictionary.txt`)

Reviewdog posts inline comments on PRs. Don't block on minor style issues - let automation handle it.

## Content Guidelines

### Accuracy vs. Speculation
**Read `DOCUMENTATION_REVIEW.md`** - Lists autogenerated speculation that was removed. When documenting:
- Verify against actual repos (`meta-calculinux` has multi-layer structure: `meta-calculinux-distro/`, `meta-picocalc-bsp-rockchip/`, `meta-calculinux-apps/`)
- Don't invent repository names (e.g., "linux-calculinux" doesn't exist; actual kernel is `linux-rockchip` from `0xd61/luckfox-linux-6.1-rk3506`)
- Only two images exist: `calculinux-image.bb` and `calculinux-bundle.bb`

### Writing Style (from `CONTRIBUTING.md`)
- Active voice, present tense, second person
- Test all commands before documenting
- Use realistic examples from the actual codebase

### Code Blocks
Always specify language:
```bash
bitbake calculinux-image
```

### Cross-References
Link to related pages. Use relative paths: `[Hardware Guide](hardware/luckfox-lyra.md)`

## File Organization

```
docs/
├── index.md                    # Homepage with grid cards
├── getting-started/            # Installation, first boot
├── hardware/                   # PicoCalc, Lyra, specs, serial console
├── user-guide/                 # Package management, updates, apps
├── developer/                  # Yocto setup, building, contributing
│   └── adding-packages/        # Recipe examples (newsboat, rust-example)
│       └── _snippets/          # Reusable content blocks
├── troubleshooting/            # FAQs, boot problems, display issues
└── resources/                  # Community links, external docs
```

## Dependencies

From `requirements.txt`:
- mkdocs ≥1.5.0
- mkdocs-material ≥9.4.0
- pymdown-extensions ≥10.3
- mkdocs-git-revision-date-localized-plugin ≥1.2.0

Material theme features enabled (see `mkdocs.yml` lines 31-42): navigation tabs/sections, search, code copy, edit action

## When Adding Content

1. Create `.md` file in appropriate `docs/` subdirectory
2. Update `mkdocs.yml` nav section
3. Test locally: `mkdocs serve`
4. Use admonitions for important info
5. Add grid cards for section landing pages
6. Create `_snippets/` for reusable content
7. Link to related pages
8. Let GitHub Actions handle formatting/linting

## Common Tasks

**Add new package recipe guide**: Create in `docs/developer/adding-packages/`, follow pattern from `newsboat.md` or `rust-example.md`

**Fix broken links**: Run `mkdocs build` to catch them (validation enabled)

**Add technical terms**: Update `.github/calculinux-dictionary.txt` for spell checker

**Preview PR changes**: PR preview deploys to `https://calculinux.github.io/docs/pr-preview/pr-<number>/` (see `.github/workflows/deploy-pr-preview.yml`)
