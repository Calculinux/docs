# Documentation Review - Speculative Content Identified

Date: October 22, 2025

This document identifies content in the documentation that appears to be autogenerated speculation and needs verification or removal.

## Critical Issues - Incorrect Information

### 1. Repository Structure (developer/overview.md)

**Location**: `docs/developer/overview.md` lines ~105-130

**Issue**: The documented repository structure is **incorrect**. The documentation shows:
```
meta-calculinux/
├── conf/
│   ├── machine/          # Machine configurations
│   │   └── picocalc-luckfox.conf
│   ├── distro/           # Distribution config
│   │   └── calculinux.conf
│   └── layer.conf        # Layer configuration
```

**Actual Structure**:
```
meta-calculinux/
├── meta-calculinux-distro/
│   ├── conf/distro/calculinux-distro.conf
│   ├── recipes-bsp/
│   ├── recipes-connectivity/
│   ├── recipes-core/
│   ├── recipes-extended/
│   └── recipes-support/
├── meta-picocalc-bsp-rockchip/
│   ├── conf/machine/luckfox-lyra.conf
│   ├── recipes-bsp/
│   └── recipes-kernel/
└── meta-calculinux-apps/
    ├── recipes-connectivity/
    └── recipes-core/packagegroups/
```

**Action**: Complete rewrite needed. The structure is a multi-layer Yocto setup, not a single layer.

### 2. Non-existent Repositories

**Location**: `docs/developer/overview.md` lines ~130-135

**Issue**: Documentation references:
- `linux-calculinux`: Kernel source (fork)
- `u-boot-calculinux`: Bootloader source (fork)

**Reality**: These repositories **do not exist**. The actual kernel is:
- `linux-rockchip_6.1.bbappend` which uses `git://github.com/0xd61/luckfox-linux-6.1-rk3506.git`

**Action**: Remove references to non-existent repositories. Document the actual external dependencies.

### 3. Non-existent Images

**Location**: `docs/developer/overview.md` lines ~290-310

**Issue**: Documentation references:
- `calculinux-minimal`
- `calculinux-base.bb`
- `calculinux-custom.bb`

**Reality**: Only two images exist:
- `calculinux-image.bb` - The main image
- `calculinux-bundle.bb` - The RAUC update bundle

**Action**: Remove references to non-existent images. Update examples to use actual image names.

### 4. Incorrect devtool Commands

**Location**: `docs/developer/overview.md` lines ~277-287

**Issue**: Commands reference non-existent components:
```bash
bitbake linux-calculinux -c unpack
```

**Reality**: Should be `linux-rockchip` not `linux-calculinux`

**Action**: Update all devtool examples to reference actual recipe names.

### 5. Filesystem Expansion (RESOLVED)

**Location**: `docs/getting-started/first-boot.md` lines ~80

**Issue**: Documentation incorrectly suggested manual filesystem expansion was needed.

**Reality**: Filesystem expansion is **automatic** via the overlayfs pre-init script (`overlayfs-etc-preinit.sh.in`). The script uses `growpart` to automatically expand the overlay partition to fill available space (leaving 10% free) during first boot.

**Action**: ✅ **FIXED** - Updated documentation to explain automatic expansion process.

## High Priority - Unverified Claims

### 6. Network Configuration Commands (RESOLVED)

**Location**: `docs/getting-started/first-boot.md` lines ~120-135

**Issue**: Incorrectly used `udhcpc` command for network configuration.

**Reality**: 
- WiFi configuration uses `iwd` (iNet Wireless Daemon) with `iwctl` command
- Ethernet uses `systemd-networkd` for automatic DHCP
- WiFi requires external USB adapter (3.3V compatible) - not built into hardware
- Supported WiFi chipsets: RTL8723DU, RTL8812AU, RTL8814AU, RTL8821CU, RTL88X2BU

**Action**: ✅ **FIXED** - Added comprehensive iwctl guide and WiFi driver documentation.

### 7. Default User Password

**Location**: `docs/getting-started/first-boot.md` lines ~30-35 and multiple locations

**Issue**: Documentation says:
```
Username: root
Password: root
```

**But also mentions**: A `pico` user with password `calc`

**Reality from code**:
- Root password hash: `$6$mwqqduWKbrqg9ufl...` (labeled as "root")
- Pico password hash: `$6$G4enDnQY4liXfauo...` (labeled as "calc")

**Action**: Verify the actual default passwords match what's documented.

## Medium Priority - Speculation

### 8. Hardware Peripherals (RESOLVED)

**Location**: Multiple files reference hardware features

**Issue**: Documentation speculated about various hardware without clear status.

**Reality**:
- **Tested/Working**: Display (built-in LCD), Keyboard (built-in), USB WiFi adapters (with listed chipsets)
- **Hardware Not Built-in**: WiFi, audio, most peripherals - must be added externally
- **Planned/Untested**: I2C RTC (DS3231), LoRa radio (Waveshare Core1262-868M), other I2C/SPI devices
- **USB WiFi Requirements**: Must operate at 3.3V, connected to USB header on Lyra

**Action**: ✅ **FIXED** - Added clear distinction between tested hardware and future/planned peripherals.

### 9. Build Times

**Location**: `docs/developer/overview.md` and `docs/developer/building.md`

**Issue**: Claims "2-8 hours" for builds and "2-6 hours" in another location

**Action**: These are reasonable estimates but should be marked as approximate and hardware-dependent.

### 10. Systemd Services

**Location**: Multiple locations

**Issue**: Documentation assumes various systemd services without verification

**Verification Needed**: 
- Check `systemd-conf_%.bbappend` - it only installs journald.conf, wlan.network, 98-wifi.link, ttyblank.conf
- No evidence of many services mentioned in troubleshooting docs

**Action**: Audit all systemd service references against actual configuration files.

## Low Priority - Style Issues

### 11. Stub Page Links

**Issue**: Many internal documentation links point to stub pages that don't exist yet

**Action**: Either:
1. Remove links to non-existent pages
2. Add note "(Coming Soon)" to stub links
3. Priority: Create those pages

### 12. Example Code Inconsistency

**Issue**: Some example code uses:
- Python syntax for BitBake recipes (mostly correct)
- Bash syntax that may not match actual system configuration
- Generic package names that don't exist in the feed

**Action**: Standardize all examples to use actual Calculinux packages and tested commands.

## Recommendations

### Immediate Actions Required:

1. **Fix Repository Structure** - This is completely wrong and will confuse developers
2. **Remove Non-existent Repos** - linux-calculinux and u-boot-calculinux don't exist
3. **Fix Image Names** - Only calculinux-image and calculinux-bundle exist
4. **Verify Passwords** - Test default passwords match documentation
5. **Fix expand-filesystem** - Either add the script or document growpart usage

### Documentation Process Improvements:

1. **Require Testing**: All command examples should be tested on actual hardware before documenting
2. **Source Truth**: Link documentation to actual source files where possible
3. **Version Tracking**: Add notes about which build version the documentation applies to
4. **Review Tags**: Add `<!-- NEEDS VERIFICATION -->` comments to speculative content

### Suggested Documentation Tags:

```markdown
!!! warning "Unverified"
    This section has not been verified on actual hardware and may need adjustment.

!!! todo "Documentation Needed"
    This feature exists but needs proper documentation.

!!! note "Hardware Dependent"
    This behavior may vary depending on your hardware configuration.
```

## Files Requiring Immediate Attention:

1. ✅ HIGH: `docs/developer/overview.md` - Repository structure section (lines 105-135)
2. ✅ HIGH: `docs/developer/overview.md` - Development tasks section (lines 277-320)
3. ⚠️ MEDIUM: `docs/getting-started/first-boot.md` - Expand filesystem and network commands
4. ⚠️ MEDIUM: All files - Verify systemd service references
5. ℹ️ LOW: Multiple files - Remove or mark stub page links

## Next Steps:

1. Review this document with maintainers
2. Create GitHub issues for each high-priority item
3. Add "NEEDS VERIFICATION" tags to speculative content
4. Begin systematic verification of all command examples
5. Update build scripts to create any missing utilities (like expand-filesystem.sh)
